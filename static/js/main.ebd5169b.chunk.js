(this["webpackJsonphealth-monitor"]=this["webpackJsonphealth-monitor"]||[]).push([[0],{212:function(e,t,a){},492:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(48),s=a.n(i),o=(a(212),a(1)),c=function(e){var t=e.children;return Object(o.jsx)("div",{style:{width:window.innerWidth,height:window.innerHeight,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(o.jsx)("div",{style:{padding:24,width:"80%",height:"100%",position:"absolute",left:0,top:0},children:t})})},d=a(9),u=a(21),l=a(185),m="verdana",f={primary:{small:{fontSize:14,fontFamily:m},medium:{},large:{},display:{fontSize:20,fontFamily:m,color:"#d63e13"}},secondary:{footer:{fontSize:12,fontFamily:m,color:"#333333"},small:{},medium:{},large:{},display:{}}},b=function(e){var t=e.style,a=e.children;return Object(o.jsx)("div",{style:Object(u.a)(Object(u.a)({},f.primary.small),t),children:a})},v=a(124),p=a.n(v),j=a(125),h=a.n(j),x=a(17);var g=function(e){var t={attributeNamePrefix:"",attrNodeName:"attr",textNodeName:"#text",ignoreAttributes:!1,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,trimValues:!0,cdataTagName:"__cdata",cdataPositionChar:"\\c",parseTrueNumberOnly:!1,numParseOptions:{hex:!0,leadingZeros:!0},arrayMode:!1,attrValueProcessor:function(e){return p.a.decode(e,{isAttributeValue:!0})},tagValueProcessor:function(e){return p.a.decode(e)},stopNodes:["parse-me-as-string"]};if(!0===h.a.validate(e)){var a=h.a.parse(e,t);if(function(e){if(!e.HealthData)return!1;if(!e.HealthData.Record)return!1;var t,a=Object(x.a)(e.HealthData.Record);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(!n.attr)return!1;if(!n.attr.type)return!1}}catch(r){a.e(r)}finally{a.f()}return!0}(a))return a}},y=a(551);function O(e){var t=function(e){return Object(n.useCallback)((function(t){t.forEach((function(t){var a=new FileReader;a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){return setTimeout((function(){var t=a.result,n=g(t);void 0!==n?e(n):alert("Uploaded file does not have expected properties")}),1)},a.readAsText(t)}))}),[])}(e.onUpload),a=Object(l.a)({onDrop:t}),r=a.getRootProps,i=a.getInputProps;return Object(o.jsx)(y.a,{sx:{borderRadius:"16px",bgcolor:"background.paper",borderColor:"text.primary",m:1,border:1,width:240},children:Object(o.jsxs)("div",Object(u.a)(Object(u.a)({},r()),{},{children:[Object(o.jsx)("input",Object(u.a)({},i())),Object(o.jsx)(b,{style:{padding:"5px"},children:"Click here to upload an XML file"})]}))})}var S=a(24);function D(e){var t={};return e.HealthData.Record.filter((function(e){return void 0!==e.attr.value&&void 0!==e.attr.startDate&&void 0!==e.attr.type&&void 0!==e.attr.unit})).forEach((function(e){var a=function(e){var t=S.DateTime.fromISO(function(e){var t=e.split(" ");return t[0]+"T"+t[1]+t[2]}(e.attr.startDate)),a=Number(e.attr.value);return{x:t,y:a}}(e),n=e.attr.type.replace("HKQuantityTypeIdentifier","").replace("HKDataType","").replace(/([a-z])([A-Z])/g,"$1 $2"),r=e.attr.unit;n in t?t[n].dataSet.push(a):t[n]={type:n,unit:r,dataSet:[a]}})),function(e){for(var t=0,a=Object.values(e);t<a.length;t++){a[t].dataSet.sort((function(e,t){return e.x.diff(t.x).milliseconds}))}return e}(t)}var k=a(546),T=a(542),A=a(531),C=a(541);function w(e){var t=e.handleChange,a=e.value;return Object(o.jsx)(A.b,{dateAdapter:T.a,children:Object(o.jsx)(C.a,{label:"Date desktop",inputFormat:"dd/MM/yyyy",value:a,onChange:t,renderInput:function(e){return Object(o.jsx)(k.a,Object(u.a)({},e))}})})}var H=a(548),R=a(545),N=a(547),W=a(543);function P(e){var t=e.timeseriesCollection,a=e.selectedTimeseries,n=e.setSelectedTimeseries;return Object(o.jsx)(y.a,{sx:{minWidth:120,maxWidth:500,padding:1},children:Object(o.jsxs)(N.a,{fullWidth:!0,children:[Object(o.jsx)(H.a,{id:"timeseries-select",children:"Data Set"}),Object(o.jsx)(W.a,{labelId:"timeseries-select-label",id:"timeseries-select",value:a,label:"Select a data type to explore",onChange:function(e){n(e.target.value)},children:Object.values(t).map((function(e,t){return Object(o.jsx)(R.a,{value:e.type,children:e.type},t)}))})]})})}var V=a(183),B=a.n(V),E=[{name:"Height",unit:"cm",statistics:{mean:180,dev:.01}},{name:"Body Mass",unit:"kg",statistics:{mean:70,dev:2}},{name:"Heart Rate",unit:"count/min",statistics:{mean:70,dev:15}},{name:"Step Count",unit:"count",statistics:{mean:1e3,dev:100}},{name:"Distance Walking Running",unit:"km",statistics:{mean:1,dev:.3}},{name:"Basal Energy Burned",unit:"kJ",statistics:{mean:300,dev:10}},{name:"Active Energy Burned",unit:"kJ",statistics:{mean:200,dev:20}},{name:"Flights Climbed",unit:"count",statistics:{mean:4,dev:1}},{name:"Apple Exercise Time",unit:"min",statistics:{mean:1,dev:.01}},{name:"Resting Heart Rate",unit:"count/min",statistics:{mean:60,dev:10}},{name:"VO2Max",unit:"mL/min\xb7kg",statistics:{mean:1,dev:.2}},{name:"Walking Heart Rate Average",unit:"count/min",statistics:{mean:100,dev:15}},{name:"Environmental Audio Exposure",unit:"dBASPL",statistics:{mean:70,dev:5}},{name:"Headphone Audio Exposure",unit:"dBASPL",statistics:{mean:65,dev:10}},{name:"Walking Double Support Percentage",unit:"%",statistics:{mean:.28,dev:.02}},{name:"Six Minute Walk Test Distance",unit:"m",statistics:{mean:500,dev:1}},{name:"Apple Stand Time",unit:"min",statistics:{mean:3.5,dev:.5}},{name:"Walking Speed",unit:"km/hr",statistics:{mean:4,dev:1}},{name:"Walking Step Length",unit:"cm",statistics:{mean:65,dev:8}},{name:"Walking Asymmetry Percentage",unit:"%",statistics:{mean:.2,dev:.01}},{name:"Stair Ascent Speed",unit:"m/s",statistics:{mean:.4,dev:.06}},{name:"Stair Descent Speed",unit:"m/s",statistics:{mean:.5,dev:.06}},{name:"Sleep Duration Goal",unit:"hr",statistics:{mean:7.5,dev:.2}},{name:"Heart Rate Variability SDNN",unit:"ms",statistics:{mean:80,dev:15}}];function I(e){var t=e.onDataGeneration;return Object(o.jsx)(y.a,{sx:{borderRadius:"16px",bgcolor:"background.paper",borderColor:"text.primary",m:1,border:1,width:180},onClick:function(){return t(function(){var e,t=S.DateTime.now(),a=S.DateTime.now().minus({days:20}),n=function(e){var t=e.start.startOf("day"),a=[];for(;t<e.end;)a.push(t),t=t.plus({days:1});return a}(S.Interval.fromDateTimes(a,t)),r={},i=Object(x.a)(E);try{var s=function(){var t=e.value,a=B()(t.statistics.mean,t.statistics.dev),i=n.map((function(e){return{x:e,y:a.next().value}}));r[t.name]={type:t.name,unit:t.unit,dataSet:i}};for(i.s();!(e=i.n()).done;)s()}catch(o){i.e(o)}finally{i.f()}return r}())},children:Object(o.jsx)(b,{style:{padding:"5px"},children:"Generate Random Data"})})}var M=a(96);function F(e){var t=function(e,t){var a=function(e,t){var a=t.dataSet;if(0===a.length)return{before:t,after:t};if(a[0].x.diff(e).milliseconds>0)return{before:Object(u.a)(Object(u.a)({},t),{},{dataSet:[]}),after:t};if(a[a.length-1].x.diff(e).milliseconds<0)return{before:t,after:Object(u.a)(Object(u.a)({},t),{},{dataSet:[]})};var n=a.findIndex((function(t){return t.x.diff(e).milliseconds>0})),r={type:t.type,unit:t.unit},i=Object(u.a)(Object(u.a)({},r),{},{dataSet:t.dataSet.slice(0,n)}),s=Object(u.a)(Object(u.a)({},r),{},{dataSet:t.dataSet.slice(n)});return{before:i,after:s}}(t,e),n=J(a.before),r=J(a.after),i=n.average&&r.average?n.average<r.average?"less":"greater":void 0;if(!n.average||!r.average)return{before:n,after:r};var s=Object(M.permutationTest)(a.before.dataSet.map((function(e){return e.y})),a.after.dataSet.map((function(e){return e.y})),i);return{before:n,after:r,pValue:s}}(e.timeseries,e.analyticsDate);return Object(o.jsxs)("div",{children:["Before: Count: ",t.before.count," ",Object(o.jsx)("br",{}),"Average: ",t.before.average," ",Object(o.jsx)("br",{}),"Deviation: ",t.before.deviation," ",Object(o.jsx)("br",{}),"After: Count: ",t.after.count," ",Object(o.jsx)("br",{}),"Average: ",t.after.average," ",Object(o.jsx)("br",{}),"Deviation: ",t.after.deviation," ",Object(o.jsx)("br",{}),t.after.average&&t.before.average&&Object(o.jsxs)("div",{children:["Overall Difference: ",t.after.average-t.before.average," ",Object(o.jsx)("br",{}),"This difference has a p-value of: ",t.pValue]})]})}function J(e){var t=e.dataSet.length;return 0===t?{count:0}:{count:t,average:Object(M.mean)(e.dataSet.map((function(e){return e.y}))),deviation:Object(M.sampleStandardDeviation)(e.dataSet.map((function(e){return e.y})))}}var L=a(188);a(491);function z(e){var t=e.timeseries,a={labels:t.dataSet.map((function(e){return e.x})),datasets:[{label:t.type,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:t.dataSet.map((function(e){return e.y}))}]};return Object(o.jsx)(L.a,{data:a,options:{title:{display:!0,text:t.type},legend:{display:!0,position:"right"},scales:{x:{type:"time",display:!0,title:{display:!0}},y:{display:!0,title:{display:!0,text:t.unit}}}}})}function G(){var e,t=Object(n.useState)(),a=Object(d.a)(t,2),i=a[0],s=a[1],c=Object(n.useState)(""),u=Object(d.a)(c,2),l=u[0],m=u[1],f=r.a.useState(S.DateTime.now()),b=Object(d.a)(f,2),v=b[0],p=b[1];return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(o.jsx)(O,{onUpload:function(e){s(D(e))}}),Object(o.jsx)(I,{onDataGeneration:function(e){s(e)}}),Object(o.jsx)(w,{handleChange:function(e){e&&p(S.DateTime.fromJSDate(e))},value:null!==(e=null===v||void 0===v?void 0:v.toJSDate())&&void 0!==e?e:null})]}),!!i&&Object(o.jsx)(P,{timeseriesCollection:i,selectedTimeseries:l,setSelectedTimeseries:m}),!!i&&!!i[l]&&Object(o.jsx)(z,{timeseries:i[l]}),!!i&&!!i[l]&&!!v&&Object(o.jsx)(F,{timeseries:i[l],analyticsDate:v})]})}var U=function(){return Object(o.jsx)(c,{children:Object(o.jsx)(G,{})})};document.title="Health Analytics",s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(U,{})}),document.getElementById("root"))}},[[492,1,2]]]);
//# sourceMappingURL=main.ebd5169b.chunk.js.map